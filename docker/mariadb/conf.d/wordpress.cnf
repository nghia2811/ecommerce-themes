# ============================================================
# MariaDB Optimizations for WordPress/WooCommerce
# /etc/mysql/conf.d/wordpress.cnf
# ============================================================

[mysqld]
# ── Character Set ─────────────────────────────────────────────
character-set-server  = utf8mb4
collation-server      = utf8mb4_unicode_ci

# ── InnoDB Settings ──────────────────────────────────────────
innodb_buffer_pool_size       = 256M
innodb_buffer_pool_instances  = 1
innodb_log_file_size          = 64M
innodb_flush_log_at_trx_commit = 2
innodb_flush_method           = O_DIRECT

# ── Query Cache (MariaDB specific) ───────────────────────────
query_cache_type   = 1
query_cache_size   = 32M
query_cache_limit  = 2M

# ── Connection ────────────────────────────────────────────────
max_connections      = 100
connect_timeout      = 10
wait_timeout         = 600
interactive_timeout  = 600
max_allowed_packet   = 256M

# ── Slow Query Log ────────────────────────────────────────────
slow_query_log       = 1
slow_query_log_file  = /var/log/mysql/slow.log
long_query_time      = 2

[client]
default-character-set = utf8mb4

[mysql]
default-character-set = utf8mb4
